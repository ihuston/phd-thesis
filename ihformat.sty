% % % % % % % % % % % % % 
%  Ian Huston - ihformat.sty
%  formatting and macros
%  $Id: ihformat.sty,v 1.8 2009/07/14 17:10:09 ith Exp $
% % % % % % % % % % % % % 
\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{ihformat}

% Get ifthen package for later on
\RequirePackage{ifthen}

% CVS Revision command, Renew \CVSRevision in each file to get current data.
% \newcommand{\version}{}
% \DeclareOption{CVSoff}{%
%  \let\@version\empty}
\DeclareOption{CVSon}{%
\def\version$Id: ihformat.sty,v 1.8 2009/07/14 17:10:09 ith Exp ${#1:v#2, #3} }%
\DeclareOption{CVSoff}{%
\def\version$#1,v #2 #3${} }%
% \renewcommand{\version}[$#1,v #2 #3 #4$]{#2, #3}}%
% Use the following line in each file to specify revision, date
% \renewcommand{\CVSrevision}{\version$Id: ihformat.sty,v 1.8 2009/07/14 17:10:09 ith Exp $}

% Should we use showlabels? Set with labels option, default is off.
\newboolean{@showlabels}
\setboolean{@showlabels}{false}
\DeclareOption{labels}{%
\setboolean{@showlabels}{true} }%
% End of options

\ExecuteOptions{CVSoff}
\ProcessOptions
% % % % % % % % % % % % % % % 
% Packages
% % % % % % % % % % % % % % %
\RequirePackage{graphicx}
\RequirePackage{color}
% % 
% \RequirePackage{times}
\RequirePackage{setspace}
\RequirePackage{verbatim}
% \usepackage[square]{natbib}
% \usepackage{rotating}
% \usepackage{psfrag}
% % 
\pagestyle{headings}
\RequirePackage{fancyhdr}
% % 
\RequirePackage{amsmath}
\RequirePackage{amssymb}
% \RequirePackage{mathrsfs}
\RequirePackage{makeidx}

% Should we use showlabels?
\ifthenelse{\boolean{@showlabels}}{\RequirePackage[inline]{showlabels}}{}

% My macros package
\RequirePackage{ihmacros}

% % % % % % % % % % 
% fancyhdr settings
% % % % % % % % % % 
%%%% pagestyle should be indicated after the margins according to the 
%%%% fancyheading instructions that come with the package
\pagestyle{fancyplain}
\newcommand{\CVSrevision}{}
\renewcommand{\chaptermark}[1]{\def\chapternamenow{#1}
               \markright{\thechapter :\ #1} }
\renewcommand{\sectionmark}[1]{\markright{\thesection :\  
%\chapternamenow \ ---\
 #1}}
\lhead[\fancyplain{}{\thepage}]         {\fancyplain{}{\rightmark}}
\chead[\fancyplain{}{}]                 {\fancyplain{}{}}
\rhead[\fancyplain{}{\leftmark}]       {\fancyplain{}{\thepage}}
\lfoot[\fancyplain{}{}]                 {\fancyplain{}{}}
\cfoot[\fancyplain{\thepage}{}]         {\fancyplain{\thepage}{}}
\rfoot[\fancyplain{} {}]  {\fancyplain{}{\CVSrevision}}

